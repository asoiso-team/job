<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="robots" content="all" />
    <meta name="author" content="Tencent-TGideas" />
    <meta name="Copyright" content="Tencent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="Description" content="邀请函" />
    <meta name="Keywords" content="邀请函,移动游戏," />
    <title>一场别有用心的发布会-腾讯移动游戏平台邀请您</title>
    <style>
    body,
    dl,
    dd,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p,
    span {
        margin: 0;
        padding: 0px;
    }
    body {
        font: 12px/1.5 tahoma, simsun, Microsoft YaHei, sans-serif;
        color: #1a5e77;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
    }
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-size: 100%;
        font-weight: normal;
    }
    img {
        border: none;
        padding: 0;
        margin: 0;
    }
    em,
    i,
    b {
        font-style: normal
    }
    ul,
    ol {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    a {
        text-decoration: none
    }
    a:hover {
        text-decoration: none
    }
    table {
        border-collapse: collapse;
        border-spacing: 0
    }
    input,
    select,
    option {
        outline: none
    }
    .loading {
        width: 50px;
        height: 50px;
        border-radius: 50px;
        border: 5px solid #f60;
        display: inline-block;
        margin-top: 150px;
    }
    .load {
        text-align: center;
        background: #171717 url(./assets/img/p1_bg.jpg) center top no-repeat;
        background-size: cover;
        overflow: hidden;
        display: block;
        z-index: 9;
        height: 100%;
    }
    .loadBg {
        height: 100%;
        width: 48px;
        height: 60px;
        position: absolute;
        top: 50%;
        margin-left: -24px;
        left: 50%;
        margin-top: -30px;
        font-size: 12px;
        color: #fe9900;
    }
    .loadGif {
        background: url(./assets/img/loading.png) no-repeat;
        background-size: 33px 33px;
        -webkit-animation: rotate 3s infinite linear;
        height: 33px;
        width: 33px;
    }
    .loadBg p {
        position: relative;
        left: -5px;
        top: 8px;
    }
    @-webkit-keyframes rotate {
        0% {
            -webkit-transform: rotate(0deg);
        }
        100% {
            -webkit-transform: rotate(360deg);
        }
    }
    .tl {
        text-align: left;
    }
    .tc {
        text-align: center;
    }
    .fl {
        float: left;
    }
    .fr {
        float: right;
    }
    .cb {
        clear: both
    }
    .bc {
        margin-left: auto;
        margin-right: auto
    }
    .pr {
        position: relative;
    }
    .pa {
        position: absolute;
    }
    .ovh {
        overflow: hidden;
    }
    .db {
        display: block;
    }
    .none {
        display: none;
    }
    .ht {
        display: block;
        overflow: hidden;
        text-indent: -999em;
    }
    html,
    body,
    .sec {
        height: 100%;
    }
    /*wraper*/
    
    .wraper {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    .container {
        width: 100%;
        height: 100%;
        position: relative;
        background: #cfcddd
    }
    /*main*/
    
    .main {
        width: 100%;
        -webkit-transition: all 0.3s linear;
        -webkit-transform: translateY(0px);
        transition: all 0.3s linear;
        transform: translateY(0px);
        -webkit-backface-visibility: hidden;
        height: 100%;
        display: none;
    }
    .ani-n {
        -webkit-transition: none;
        transition: none;
    }
    .tips {
        width: 100%;
        height: 22px;
        line-height: 22px;
        color: #666;
        text-align: center;
        top: -36px;
        left: 0px;
        z-index: 9;
        background: #fff;
        box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.3);
        transition: All .5s ease-in;
    }
    .tips-ani {
        -webkit-transform: translateY(100%);
        transform: translateY(100%);
        -webkit-transition: all .2s ease-out;
        transition: all .2s ease-out;
    }
    /*sec*/
    
    .sec {
        width: 100%;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
    }
    .sec img {
        width: 100%;
        vertical-align: top;
    }
    .mask {
        width: 100%;
        height: 100%;
        background: #32373b;
        position: absolute;
        left: 0;
        top: 0;
        z-index: 50;
        display: none;
    }
    .mask-box {
        width: 100%;
        height: 252px;
        position: absolute;
        top: 50%;
        left: 0;
        margin-top: -119px;
    }
    .mask-pic {
        width: 194px;
        height: 194px;
        margin: 0 auto;
        text-align: center;
    }
    .mask span {
        font-size: 22px;
        display: block;
        color: #ffd40a;
        text-align: center;
        width: 100%;
        height: 25px;
        padding-top: 10px;
    }
    .mask i {
        width: 128px;
        height: 194px;
        background: url(http://ossweb-img.qq.com/images/roco/m/movie2014/hengping.png) 0 0 no-repeat;
        background-size: 128px 194px;
        display: block;
        margin: 0 auto;
        -webkit-animation: maskAni 1.5s ease infinite alternate;
        animation: maskAni 1.5s ease infinite alternate;
    }
    @-webkit-keyframes maskAni {
        0% {
            -webkit-transform: rotate(-90deg);
        }
        30% {
            -webkit-transform: rotate(-90deg);
        }
        70% {
            -webkit-transform: rotate(0deg);
        }
        100% {
            -webkit-transform: rotate(0deg);
        }
    }
    </style>
    <link rel="stylesheet" href="assets/style.css">
    <script>
    document.documentElement.style.height = window.innerHeight + 'px';
    var _speedMark = new Date();
    </script>
</head>

<body>
    <div class="wraper ovh" id="wraper">
        <div class="container" id="container">
            <div class="load">
                <div class="loadBg">
                    <div class="loadGif"></div>
                    <p>loading...</p>
                </div>
            </div>
            <div class="pa tips" id="tips">亲,只能敲破哦~~</div>
            <div class="main pr ani-n" id="main">
                <section class="sec sec-1" id="sec-1">
                    <div class="header">
                        <span class="logo logo1">
                            <img src="./assets/img/p1_t1.png" width="100%" alt="游戏界大咖 暗地里都忙什么？">
                        </span>
                    </div>
                    <div class="con">
                        <span class="person person1">
                            <img src="./assets/img/p1_t2.png" width="100%" alt="两个人物">
                        </span>
                        <span class="person-descr person-descr1">
                            <img src="./assets/img/p1_t3.png" width="100%" alt="我不造">
                        </span>
                    </div>
                    <div class="layer" data-depth="0.75">
                        <span class="arr-1">
                            <img src="./assets/img/p1_i1.png" width="100%" alt="箭头1">
                        </span>
                        <span class="arr-2">
                            <img src="./assets/img/p1_i2.png" width="100%" alt="箭头2">
                        </span>
                        <span class="arr-3">
                            <img src="./assets/img/p1_i3.png" width="100%" alt="箭头3">
                        </span>
                        <span class="arr-4">
                            <img src="./assets/img/p1_i4.png" width="100%" alt="箭头4">
                        </span>
                    </div>
                    <span class="slide-top">
                        <img src="./assets/img/p_up.png" width="100%" alt="向上滑动">
                    </span>
                </section>
                <section class="sec sec-2" id="sec-2">
                    <div class="header">
                        <span class="logo logo2">
                            <img src="./assets/img/p2_t1.png" width="100%" alt="一堆看上去好像很厉害">
                        </span>
                    </div>
                    <div class="con">
                        <span class="person person2">
                            <img src="./assets/img/p2_t2.png" width="100%" alt="人物">
                        </span>
                        <span class="person-descr person-descr2">
                            <img src="./assets/img/p2_t3.png" width="100%" alt="我不看">
                        </span>
                    </div>
                    <div class="layer" data-depth="0.75">
                        <span class="arr-1">
                            <img src="./assets/img/p2_i1.png" width="100%" alt="箭头1">
                        </span>
                        <span class="arr-2">
                            <img src="./assets/img/p2_i2.png" width="100%" alt="箭头2">
                        </span>
                        <span class="arr-3">
                            <img src="./assets/img/p2_i3.png" width="100%" alt="箭头3">
                        </span>
                        <span class="arr-4">
                            <img src="./assets/img/p2_i4.png" width="100%" alt="箭头4">
                        </span>
                    </div>
                    <span class="slide-top">
                        <img src="./assets/img/p_up.png" width="100%" alt="向上滑动">
                    </span>
                </section>
                <section class="sec sec-3" id="sec-3">
                    <div class="header">
                        <span class="logo logo3">
                            <img src="./assets/img/p3_t1.png" width="100%" alt="一堆看上去好像很厉害">
                        </span>
                    </div>
                    <div class="con">
                        <span class="person person3">
                            <img src="./assets/img/p3_t2.png" width="100%" alt="人物">
                        </span>
                        <span class="person-descr person-descr3">
                            <img src="./assets/img/p3_t3.png" width="100%" alt="我不看">
                        </span>
                    </div>
                    <div class="layer" data-depth="0.75">
                        <span class="arr-1">
                            <img src="./assets/img/p3_i1.png" width="100%" alt="箭头1">
                        </span>
                        <span class="arr-2">
                            <img src="./assets/img/p3_i2.png" width="100%" alt="箭头2">
                        </span>
                        <span class="arr-3">
                            <img src="./assets/img/p3_i3.png" width="100%" alt="箭头3">
                        </span>
                        <span class="arr-4">
                            <img src="./assets/img/p3_i4.png" width="100%" alt="箭头4">
                        </span>
                        <span class="arr-5">
                            <img src="./assets/img/p3_i5.png" width="100%" alt="箭头4">
                        </span>
                    </div>
                    <span class="slide-top">
                        <img src="./assets/img/p_up.png" width="100%" alt="向上滑动">
                    </span>
                </section>

                <section class="sec sec-4" id="sec-4">
                    <span class="breaktxt crack_normal">
                        <img src="./assets/img/breaktxt.jpg" class="break1">
                        <img src="./assets/img/breaktxte.jpg" class="break2">
                    </span>
                    <span class="crack crack_normal" id="beat">
                        <span class="crack-icon">
                            <b>
                            <img src="./assets/img/crack.png">
                        </b>
                        </span>
                        <img src="./assets/img/creak_arrow.png" class="arrow">
                        <p>点击敲破</p>
                    </span>
                    <div class="layer crack_normal" data-depth="0.75">
                        <span class="bg-1">
                            <img src="./assets/img/extenddot.png" alt="箭头2">
                        </span>
                        <span class="bg-2">
                            <img src="./assets/img/extendbg.png" alt="箭头1">
                        </span>
                    </div>
                    <div class="overlay"></div>
                    <div id="keyframes" class="keyframes"></div>
                </section>

                <section class="sec sec-5" id="sec-5">
                    <div class="header">
                        <span class="logo logo5">
                            <img src="./assets/img/p5_t1.png" width="100%" alt="一场别有用心的移动游戏">
                        </span>
                    </div>
                    <div class="con">
                        <span class="person person5">
                            <img src="./assets/img/p5_t2.png" width="100%" alt="拿着手机就能参加">
                        </span>
                        <span class="person-descr person-descr5">
                            <img src="./assets/img/p5_t3.png" width="100%" alt="简直业界良心">
                        </span>
                    </div>
                    <div class="layer" data-depth="0.75">
                        <span class="arr-1">
                            <img src="./assets/img/p5_i1.png" width="100%" alt="箭头1">
                        </span>
                        <span class="arr-2">
                            <img src="./assets/img/p5_i2.png" width="100%" alt="箭头2">
                        </span>
                        <span class="arr-3">
                            <img src="./assets/img/p5_i3.png" width="100%" alt="箭头3">
                        </span>
                        <span class="arr-4">
                            <img src="./assets/img/p5_i4.png" width="100%" alt="箭头4">
                        </span>
                    </div>
                    <span class="slide-top">
                        <img src="./assets/img/p5_iup.png" width="100%" alt="向上滑动">
                    </span>
                </section>

                <section class="sec sec-6" id="sec-6">
                    <div class="header">
                        <span class="logo logo6">
                            <img src="./assets/img/p6_t1.png" width="100%" alt="一场别有用心的移动游戏">
                        </span>
                    </div>
                    <div class="con">
                        <span class="person person6">
                            <img src="./assets/img/p6_t2.png" width="100%" alt="拿着手机就能参加">
                        </span>
                        <span class="person-descr person-descr6">
                            <img src="./assets/img/p6_t3.png" width="100%" alt="简直业界良心">
                        </span>
                    </div>
                    <div class="layer" data-depth="0.75">
                        <span class="arr-1">
                            <img src="./assets/img/p6_i1.png" width="100%" alt="箭头1">
                        </span>
                        <span class="arr-2">
                            <img src="./assets/img/p6_i2.png" width="100%" alt="箭头2">
                        </span>
                        <span class="arr-3">
                            <img src="./assets/img/p6_i3.png" width="100%" alt="箭头3">
                        </span>
                    </div>
                    <span class="slide-top">
                        <img src="./assets/img/p_up.png" width="100%" alt="向上滑动">
                    </span>
                </section>
                <section class="sec sec-7 sec-07-show" id="sec-4">
                    <div class="form-box">
                        <input id="name" type="text" placeholder="姓名">
                        <input id="company" type="text" placeholder="公司">
                        <input id="email" type="text" placeholder="邮箱">
                        <input id="weixin" type="text" placeholder="微信">
                        <textarea id="question" placeholder="问题"></textarea>
                        <div class="submit-box clearfix">
                            <a class="submit-info" href="javascript:;" id="submit-info">提交资料</a>
                            <a id="share-firends" class="share-firends">分享给好友</a>
                        </div>
                    </div>
                    <div class="rule-tips"></div>
                    <div class="layer crack_normal" data-depth="0.75"></div>
                </section>
            </div>
        </div>
    </div>
    <div class="mask flexcontainer" id="mask" style="display:none">
        <div class="mask-box">
            <div class="mask-pic"><i></i>
            </div>
            <span>为了更好的体验，请将手机/平板竖过来</span>
        </div>
    </div>
    <div id="share-dia" class="share-dia">
        <img src="./assets/img/share_bg.png" width="176" height="77.5" alt="点击分享">
    </div>
    <script>
    (function(m) {
        if (m) {
            return
        }
        var vendors = ["webkit", "moz", "o"];
        var m = {
            extend: function(destination, source, override, replacer) {
                if (override === undefined) {
                    override = true
                }
                for (var property in source) {
                    if (override || !(property in destination)) {
                        if (replacer) {
                            replacer(property)
                        } else {
                            destination[property] = source[property]
                        }
                    }
                }
                return destination
            },
            support: {
                translate3d: (function() {
                    var sTranslate3D = "translate3d(0px, 0px, 0px)";
                    var eTemp = document.createElement("div");
                    eTemp.style.cssText = " -moz-transform:" + sTranslate3D + "; -ms-transform:" + sTranslate3D + "; -o-transform:" + sTranslate3D + "; -webkit-transform:" + sTranslate3D + "; transform:" + sTranslate3D;
                    var rxTranslate = /translate3d\(0px, 0px, 0px\)/g;
                    var asSupport = eTemp.style.cssText.match(rxTranslate);
                    var bHasSupport = (asSupport !== null && asSupport.length == 1);
                    return bHasSupport
                })()
            },
            css: function(obj, prop, value) {
                var needVendor = /transform/i;
                if (needVendor.test(prop)) {
                    for (var i = 0; i < vendors.length; i++) {
                        obj.style[vendors[i] + prop.substr(0, 1).toUpperCase() + prop.substr(1)] = value
                    }
                }
                obj.style[prop] = value
            }
        };
        window.m = m
    })(window.m);
    m.Slide = function(config) {
        this.config = m.extend(m.extend({}, m.Slide.config), config, true);
        this.init()
    };
    m.Slide.config = {
        touchMove: false,
        animTime: 500,
        touchDis: 40,
        direction: "x",
        touchSpeed: 1,
        currentClass: "current",
        progressBar: false
    };
    m.Slide.prototype = {
        init: function() {
            var self = this;
            var c = self.config;
            self._data = {};
            self.target = c.target;
            self.length = self.target.length;
            self.trigger = c.trigger;
            self.num = self.target.length;
            self.wrap = self.target[0].parentNode;
            if (m.support.translate3d) {
                self.wrap.style.webkitTransition = "-webkit-transform " + c.animTime + "ms ease-out"
            }
            m.css(self.wrap, "transform", "translate(0,0)");
            self.width = self.wrap.parentNode.clientWidth;
            if (c.progressBar === true) {
                var progressBar = document.createElement("ul");
                progressBar.classList.add("progress-bar");
                for (var i = 0; i < self.length; i++) {
                    var child = document.createElement("li");
                    progressBar.appendChild(child)
                }
                self.progressBar = self.wrap.parentNode.appendChild(progressBar).childNodes
            }
            self._attach();
            self.playTo(0)
        },
        _attach: function() {
            var self = this;
            var c = self.config;
            window.addEventListener("resize", self.update.bind(self));
            if (self.trigger) {
                var len = self.trigger.length;
                for (var i = 0; i < len; i++) {
                    (function(i) {
                        self.trigger[i].addEventListener("touchend", function(e) {
                            self.playTo(i)
                        })
                    })(i)
                }
            }
            var d = self._data;
            var locked = false;
            var touchDirection;
            var touchMove, touchEnd;
            if (c.touchMove) {
                self.wrap.addEventListener("touchstart", function(e) {
                    if (c.ontouchstart && c.ontouchstart.apply(self, [e]) === false) {
                        return false
                    }
                    d.pageX = e.touches[0].pageX;
                    d.pageY = e.touches[0].pageY;
                    self.wrap.style.webkitTransitionDuration = "0ms";
                    self.wrap.addEventListener("touchmove", touchMove);
                    self.wrap.addEventListener("touchend", touchEnd);
                    touchDirection = ""
                })
            }
            touchMove = function(e) {
                var tips = document.getElementById("tips");
                d.disX = e.touches[0].pageX - d.pageX;
                d.disY = e.touches[0].pageY - d.pageY;
                if (c.direction == "x") {
                    d.dis = d.disX
                } else {
                    d.dis = d.disY
                }
                if (!touchDirection) {
                    if (Math.abs(d.disX / d.disY) > 1) {
                        touchDirection = "x"
                    } else {
                        touchDirection = "y"
                    }
                }
                if (c.ontouchmove && c.ontouchmove.apply(self, [d.dis, e]) === false) {
                    return false
                }
                if (c.direction == touchDirection) {
                    if (c.direction == "x") {
                        m.css(self.wrap, "transform", "translate3d(" + (d.dis - self.target[self.current].offsetLeft) + "px,0,0)")
                    } else {
                        m.css(self.wrap, "transform", "translate3d(0," + (d.dis - self.target[self.current].offsetTop) + "px,0)")
                    }
                }
            };
            touchEnd = function() {
                if (touchDirection && c.direction != touchDirection) {
                    return
                }
                if (d.dis === undefined || isNaN(d.dis)) {
                    d.dis = 0
                }
                self.wrap.style.webkitTransitionDuration = c.animTime + "ms";
                self.wrap.removeEventListener("touchmove", touchMove);
                self.wrap.removeEventListener("touchend", touchEnd);
                var isOK = true;
                if (c.ontouchend) {
                    if (c.ontouchend.apply(self, [d.dis]) === false) {
                        isOK = false
                    }
                }
                if (!d.dis || (Math.abs(d.dis) < c.touchDis || !isOK)) {
                    self.playTo(self.current);
                    return
                }
                if (d.dis > 0) {
                    document.getElementById("tips").style.top = "-36px";
                    self.playTo(self.current - c.touchSpeed)
                } else {
                    if (self.current == 3) {
                        self.playTo(self.current);
                        document.getElementById("tips").style.top = "0"
                    } else {
                        document.getElementById("tips").style.top = "-36px";
                        self.playTo(self.current + c.touchSpeed)
                    }
                }
                d.dis = 0
            };
            self.wrap.addEventListener("click", function(e) {
                c.onclick && c.onclick.call(self, e)
            })
        },
        playTo: function(i) {
            var self = this;
            var c = self.config;
            self.wrap.style.webkitTransitionDuration = c.animTime + "ms";
            if (c.onchangebefore) {
                if (c.onchangebefore.apply(self, [i]) === false) {
                    return
                }
            }
            if (i >= self.num - 1) {
                i = self.num - 1
            }
            if (i < 0) {
                i = 0
            }
            if (m.support.translate3d) {
                if (c.direction == "x") {
                    m.css(self.wrap, "transform", "translate3d(" + (-self.target[i].offsetLeft) + "px,0,0)")
                } else {
                    m.css(self.wrap, "transform", "translate3d(0," + (-self.target[i].offsetTop) + "px,0)")
                }
            } else {
                if (c.direction == "x") {
                    m.css(self.wrap, "transform", "translate(" + (-self.target[i].offsetLeft) + "px,0)")
                } else {
                    m.css(self.wrap, "transform", "translate(0," + (-self.target[i].offsetTop) + "px)")
                }
            }
            if (i === self.current) {
                return
            }
            if (self.trigger && self.trigger[self.current]) {
                self.trigger[self.current].classList.remove(c.currentClass)
            }
            if (self.progressBar && self.progressBar[self.current]) {
                self.progressBar[self.current].classList.remove(c.currentClass)
            }
            self.prevPage = self.current;
            self.current = i;
            if (self.trigger && self.trigger[self.current]) {
                self.trigger[self.current].classList.add(c.currentClass)
            }
            if (self.progressBar && self.progressBar[self.current]) {
                self.progressBar[self.current].classList.add(c.currentClass)
            }
            if (c.lazyClass) {
                self.lazy(i)
            }
            window.setTimeout(function() {
                c.onchange && c.onchange.apply(self, [i])
            }, c.animTime)
        },
        prev: function() {
            this.playTo(this.current - 1)
        },
        next: function() {
            this.playTo(this.current + 1)
        },
        update: function(e) {
            var self = this;
            self.width = self.wrap.parentNode.clientWidth
        },
        lazy: function(i) {
            var lazyElems = [];
            targetWrap = this.target[i];
            if (targetWrap.classList.contains(this.config.lazyClass)) {
                lazyElems.push(targetWrap)
            }
            var lazyChildren = Array.prototype.slice.call(targetWrap.querySelectorAll("." + this.config.lazyClass), 0);
            lazyElems = lazyElems.concat(lazyChildren);
            for (var j = 0; j < lazyElems.length; j++) {
                var elem = lazyElems[j];
                var url = elem.getAttribute("data-url");
                if (url) {
                    if (/img/i.test(elem.tagName)) {
                        elem.src = url
                    } else {
                        elem.style.backgroundImage = "url(" + url + ")"
                    }
                    elem.removeAttribute("data-url")
                }
            }
        }
    };
    </script>
    <script>
    //判断手机横竖屏状态： 
    function checkDirect() {
        if (window.orientation == 180 || window.orientation == 0) {
            document.querySelector(".mask").style.display = "none";
        }
        if (window.orientation == 90 || window.orientation == -90) {
            document.querySelector(".mask").style.display = "block";
        }
    }

    function gid(o) {
        return document.getElementById(o);
    }
    window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", checkDirect, false);


    //动态生成JS或CSS;
    function delay_js(url) {
        var type = url.split("."),
            file = type[type.length - 1];
        if (file == "css") {
            var obj = document.createElement("link"),
                lnk = "href",
                tp = "text/css";
            obj.setAttribute("rel", "stylesheet");
        } else var obj = document.createElement("script"),
            lnk = "src",
            tp = "text/javascript";
        obj.setAttribute(lnk, url);
        obj.setAttribute("type", tp);
        file == "css" ? document.getElementsByTagName("head")[0].appendChild(obj) : document.body.appendChild(obj);
        return obj;
    };

    //延时加载并判断是否加载完毕
    function loadjs(url, succ, v) {
        var elem = delay_js(url);
        if ((navigator.userAgent.indexOf('MSIE') == -1) ? false : true) {
            elem.onreadystatechange = function() {
                if (this.readyState && this.readyState == "loading") return;
                else succ(v);
            };
        } else elem.onload = function() {
            succ(v);
        };
        elem.onerror = function() {};
    };

    //图片预加载
    var imgPath = "./assets/img/";

    var loadImage = function(path, callback) {
        var img = new Image();
        img.onload = function() {
            img.onload = null;
            callback(path);
        }
        img.src = path;
    }

    function removeElement(_element) {
        var _parentElement = _element.parentNode;
        if (_parentElement) {
            _parentElement.removeChild(_element);
        }
    }
    var loadingPage = (function() {
        var sourceArr = ['p1_bg.jpg', 'p1_t1.png', 'p1_t2.png', 'p1_t3.png', 'p_up.png', 'p2_t1.png', 'p2_t2.png', 'p2_t3.png', 'p3_t1.png', 'p3_t2.png', 'p3_t3.png', 'breaktxt.jpg', 'breaktxte.jpg', 'btn_share.jpg', 'btn_submit.jpg', 'p5_bgc.jpg', 'p5_t1.png', 'p5_t2.png', 'p5_t3.png', 'p5_iup.png', 'p6_t1.png', 'p6_t2.png', 'p6_t3.png', 'share_bg.png', 'txt_rule.jpg'];
        for (var i = 0; i < sourceArr.length; i++) {
            sourceArr[i] = (imgPath + sourceArr[i]);
        };
        var imgLoader = function(imgs, callback) {
            var len = imgs.length,
                i = 0;
            while (imgs.length) {
                loadImage(imgs.shift(), function(path) {
                    callback(path, ++i, len);
                });
            }
        }
        imgLoader(sourceArr, function(path, curNum, total) {
            var percent = curNum / total;
            if (percent == 1) {
                //loading页隐藏
                var domLoading = document.querySelector('.load');
                removeElement(domLoading);
                gid("main").style.display = "block";
                setTimeout(gameLoading, 500);
            }
        });
    })();


    function gameLoading() {
            // 视差
            loadjs("./assets/parallax.js", function() {
                var scene = document.getElementById('wraper');
                var parallax = new Parallax(scene);
            }, "");

            var sections = document.querySelectorAll('#main .sec');

            function setPageHeight() {
                for (var i = 0; i < sections.length; i++) {
                    sections[i].style.height = window.innerHeight + 'px';
                }
                gid("section").style.height = window.innerHeight * sections.length + "px";
            }

            var slide = new m.Slide({
                target: sections,
                touchMove: true,
                direction: 'y',
                animTime: 300,
                onchange: function(n) {
                    gid("main").className = "main pr sec-0" + (n + 1) + "-show ";
                    if (n == 1) {
                        music = {
                            obj: null,
                            create: function() {
                                music.obj = new Audio();
                                music.obj.preload = 'auto';
                                music.obj.type = 'audio/mpeg';
                                var source = document.createElement('source');
                                source.src = 'http://mobilegame.tencent.com/act/a20140723invite/crack.mp3';
                                music.obj.appendChild(source);
                            },
                            play: function() {
                                music.obj.play();
                            },
                            stop: function() {
                                music.obj.pause();
                            }
                        };
                        music.create();
                        music.play();
                        music.stop();
                    }
                    if (n == 3) {
                        document.querySelectorAll(".sec")[3].className = "sec sec-4";
                        return false;
                    }
                    gid("main").className = "main pr sec-0" + (this.current + 1) + "-show ";                    

                }
            });

            loadjs("./assets/film.js", function() {
                var path = "./assets/img/";
                var resource = [];
                for (var i = 1; i < 26; i++) {
                    resource.push(path + 'p' + i + '.png');
                };
                var createFilm = function(node, res) {
                    return film(node, {
                        resource: res,
                        aniType: "easeInOut",
                        //每次自动完成一次动画播放后的回调
                        aniComplete: function() {
                            slide.next();
                        }
                    })
                }
                var multiplePic = createFilm(document.getElementById('keyframes'), resource);

                gid("beat").onclick = function() {
                    gid("sec-4").className = "sec sec-4 crack_on";
                    gid("tips").style.top = "-36px";
                    music.play();
                    multiplePic.jumpTo(0); //跳转到第第三帧，从0开始计算
                    multiplePic.playByNum(25, 'backward');
                }

            }, "");


            var share_firends = document.getElementById("share-firends");
            var share_dia = document.getElementById("share-dia");
            share_firends.onclick = function() {                
                share_dia.style.display = "block";
                setTimeout(function() {
                    share_dia.style.display = "none";
                }, 2000);
            };

            var stopElem = document.querySelectorAll('.works'),
                len = stopElem.length;
            for (var i = 0; i < len; i++) {
                stopElem[i].addEventListener('touchstart', function(e) {
                    alert(1);
                    e.stopPropagation();
                })
            }
        }
        //防止屏幕拖动
    document.documentElement.addEventListener('touchmove', function(e) {
        e.preventDefault();
    });


    var Util = {};
    Util.FLOADJS_MAP = {};
    Util.FloadJS = function(a, b, d) {
        if (typeof(Util.FLOADJS_MAP[a]) == "undefined") {
            Util.FLOADJS_MAP[a] = 0;
            var c = document.createElement("script"),
                e = document.body || document.getElementsByTagName('head')[0];
            c.onerror = function() {
                if (d !== '' && 'function' == typeof(d)) {
                    d();
                }
            };
            if (c.readyState) {
                c.onreadystatechange = function() {
                    if (c.readyState == "loaded" || c.readyState == "complete") {
                        c.onreadystatechange = null;
                        if ('function' == typeof(b)) {
                            Util.FLOADJS_MAP[a] = 1;
                            b();
                        }
                    }
                }
            } else {
                c.onload = function() {
                    if ('function' == typeof(b)) {
                        Util.FLOADJS_MAP[a] = 1;
                        b();
                    }
                }
            }
            c.src = a;
            e.appendChild(c);
        } else {
            var tc = setInterval(function() {
                if (Util.FLOADJS_MAP[a]) {
                    b();
                    clearInterval(tc);
                }
            }, 20);
        }
    };


    document.getElementById("submit-info").onclick = function() {
        var name = document.getElementById("name").value;
        if (name == "") {
            alert("请填写姓名");
            return;
        }
        var company = document.getElementById("company").value;
        if (company == "") {
            alert("请填写公司");
            return;
        }
        var email = document.getElementById("email").value;

        if (email != "") {
            if (!(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/).test(email)) {
                alert("请输入正确的邮箱地址！");
                return;
            }
        }
        var weixin = document.getElementById("weixin").value;
        var question = document.getElementById("question").value;
        if (question == "") {
            alert("请填写问题");
            return;
        }

        var url = "http://apps.game.qq.com/cgi-bin/comm_act/a20140723invite/add_user_info.cgi"
        Util.FloadJS(url + "?name=" + name + "&company=" + company + "&email=" + email + "&weixin=" + weixin + "&question=" + question + "&rd=" + Math.random(), function() {

            if (typeof(resData) == "undefined" || !resData) {
                alert("系统繁忙，请稍后重试！");
                return;
            } else if (resData.ret != 0) {
                alert(resData.msg);
                return;
            }
            alert(resData.msg);
        }, function() {});
    }

    var wxData = {
        url: 'http://mobilegame.tencent.com/act/a20140723invite/index.htm',
        desc: "关注\"腾讯移动游戏平台\"官方微信，关注《有料》线上发布会",
        img_url: "./assets/img/wx.jpg"
    }

    function onBridgeReady() {
        //转发朋友圈
        WeixinJSBridge.on("menu:share:timeline", function(e) {
            var data = {
                img_url: wxData.img_url,
                img_width: "120",
                img_height: "120",
                link: wxData.url,
                desc: wxData.desc,
                title: '一场别有用心的发布会'

            };
            WeixinJSBridge.invoke("shareTimeline", data, function(res) {
                WeixinJSBridge.log(res.err_msg)
            });
        });
        //同步到微博
        WeixinJSBridge.on("menu:share:weibo", function() {
            WeixinJSBridge.invoke("shareWeibo", {
                "content": '关注\"腾讯移动游戏平台\"官方微信，关注《有料》线上发布会',
                "url": wxData.url
            }, function(res) {
                WeixinJSBridge.log(res.err_msg);
            });
        });
        //分享给朋友
        WeixinJSBridge.on('menu:share:appmessage', function(argv) {
            WeixinJSBridge.invoke("sendAppMessage", {
                img_url: wxData.img_url,
                img_width: "120",
                img_height: "120",
                link: wxData.url,
                desc: wxData.desc,
                title: "一场别有用心的发布会"
            }, function(res) {
                WeixinJSBridge.log(res.err_msg)
            });
        });
    };
    //执行
    try {
        document.addEventListener('WeixinJSBridgeReady', function() {
            onBridgeReady();
        });
    } catch (e) {}
    </script>
</body>

</html>